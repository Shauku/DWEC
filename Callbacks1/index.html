<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <div>
            <button id="clasica" onclick="clasica();">Versió Clasica</button>
            <button id="callback" onclick="ambCallback(selectRandom);">Versió Callback</button>
            <button id="asincrono" onclick="asincrona(cuarta);">Versió Asincrona</button>
            <p>Conclusiones: Una funcion callback es una funcion que recibe como parametro otra funcion, para que esta pueda
            ser ejecutada dentro de la primera funcion. Esto no hace que sea asíncrona, para conseguir un efecto asíncrono 
            con una funcion es necesario utilizar el metodo setTimeout(funcion, delay) que llama a la funcion especificada
            una vez el delay (en milisegundos) haya transcurrido.</p>
        </div>
    <script>
        function asincrona(funcioAExecutar){
            console.log("Llamo a primera()");
            primera();
            console.log("Llamo a segunda(callback)");
            segunda(funcioAExecutar);
            console.log("Termina principal()");
        }
        function ambCallback(funcioAExecutar){
            console.log("Llamo a primera()");
            primera();
            console.log("Llamo a segunda() o tercera () desde principal()");
            funcioAExecutar();
            console.log("Llamo a segunda() o tercera () desde principal()");
            funcioAExecutar();
            console.log("Acaba la ejecución de primera()");
        }
        function selectRandom(){
            var x = Math.round(Math.random());
            switch (x){
                case 0: segona(); break;
                case 1: tercera(); break;
            };
        }
        function clasica (){
            console.log("Llamo a primera()");
            primera();
            console.log("Llamo a segunda()");
            segona();
            console.log("Acabo de llamar a segunda desde principal()");
            console.log(" Llamo a tercera()desde principal()");
            tercera();
            console.log("Acabo de llamar a tercera desde principal()");
        }
        function segunda (callback){
            console.log("Empeiza segunda(callback)");
            console.log("Empieza el Timeout de cuarta()");
            setTimeout(callback, 5000);
            console.log("Acabo de llamar al Timeout con cuarta()");
            console.log("Termina segunda()");
        }
        function primera (){
            console.log("Empieza la ejecución de primera()");
            console.log("Entro al bucle llarg");
            for (var i=0; i<5000;i++){}
            console.log("Surto del bucle llarg");
            console.log("Acaba la ejecución de primera()");
        }
        function segona () {
            console.log("Empieza la ejecución de segunda()");
            console.log("Entro al bucle llarg");
            for (var i=0; i<5000;i++){}
            console.log("Surto del bucle llarg");
            console.log("Acaba la ejecución de segunda()");
        }
        function tercera () {
            console.log("Empieza la ejecución de tercera()");
            console.log("Entro al bucle llarg()");
            for (var i=0; i<5000;i++){}
            console.log("Surto del bucle llarg()");
            console.log("Acaba la ejecución de tercera()");
        }
        function cuarta () {
            console.log("Empieza la ejecución de cuarta()");
            alert("Ola, k ase?");
            console.log("Termina la ejecución de cuarta()");
        }
    </script>
    </body>
</html>
